<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆå‘˜é¡µé¢ç”Ÿæˆå™¨ | Wang Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-100 p-8">
    <div class="max-w-4xl mx-auto">
        <div class="bg-white rounded-xl shadow-lg p-8 mb-8">
            <h1 class="text-3xl font-bold text-slate-900 mb-4">ğŸ§¬ Wang Lab æˆå‘˜é¡µé¢ç”Ÿæˆå™¨</h1>
            <p class="text-slate-600 mb-6">é€‰æ‹©æˆå‘˜æ•°æ®æ–‡ä»¶ï¼Œè‡ªåŠ¨ç”Ÿæˆç»Ÿä¸€æ ·å¼çš„ä¸ªäººé¡µé¢</p>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">é€‰æ‹©æˆå‘˜æ•°æ®æ–‡ä»¶ (JSON)</label>
                    <input type="file" id="jsonFile" accept=".json" class="block w-full text-sm text-slate-500
                        file:mr-4 file:py-2 file:px-4
                        file:rounded-lg file:border-0
                        file:text-sm file:font-semibold
                        file:bg-teal-50 file:text-teal-700
                        hover:file:bg-teal-100
                        cursor-pointer">
                </div>
                
                <button onclick="generatePage()" class="w-full bg-teal-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-teal-700 transition">
                    ç”Ÿæˆé¡µé¢
                </button>
            </div>
        </div>

        <div id="output" class="hidden bg-white rounded-xl shadow-lg p-8">
            <h2 class="text-2xl font-bold text-slate-900 mb-4">âœ… ç”ŸæˆæˆåŠŸï¼</h2>
            <p class="text-slate-600 mb-4">å¤åˆ¶ä¸‹é¢çš„HTMLä»£ç ï¼Œä¿å­˜ä¸º <code class="bg-slate-100 px-2 py-1 rounded">.html</code> æ–‡ä»¶</p>
            
            <div class="relative">
                <button onclick="copyToClipboard()" class="absolute top-2 right-2 bg-teal-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-teal-700 transition">
                    ğŸ“‹ å¤åˆ¶ä»£ç 
                </button>
                <pre id="htmlOutput" class="bg-slate-900 text-slate-100 p-6 rounded-lg overflow-x-auto text-sm leading-relaxed max-h-96"></pre>
            </div>
            
            <div class="mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                <h3 class="font-bold text-blue-900 mb-2">ğŸ’¡ ä½¿ç”¨æç¤º</h3>
                <ul class="text-sm text-blue-800 space-y-1">
                    <li>â€¢ å°†ç”Ÿæˆçš„HTMLä¿å­˜åˆ° <code>members/</code> ç›®å½•</li>
                    <li>â€¢ æ–‡ä»¶å‘½åæ ¼å¼ï¼š<code>å§“åæ‹¼éŸ³-new.html</code></li>
                    <li>â€¢ ç¡®ä¿å›¾ç‰‡è·¯å¾„æ­£ç¡®ï¼ˆç›¸å¯¹äºmembersç›®å½•ï¼‰</li>
                    <li>â€¢ åœ¨ä¸»é¡µæ·»åŠ å¯¹åº”çš„æˆå‘˜å¡ç‰‡é“¾æ¥</li>
                </ul>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-lg p-8 mt-8">
            <h2 class="text-2xl font-bold text-slate-900 mb-4">ğŸ“ JSONæ•°æ®æ ¼å¼ç¤ºä¾‹</h2>
            <pre class="bg-slate-900 text-slate-100 p-6 rounded-lg overflow-x-auto text-sm leading-relaxed"><code>{
  "name": "å§“å",
  "position": "èŒä½æè¿°",
  "image": "../assets/images/photo.jpg",
  "email": "email@example.com",
  "institution": "æœºæ„åç§°",
  "links": [
    {
      "icon": "fab fa-researchgate",
      "url": "https://...",
      "text": "é“¾æ¥æ–‡æœ¬"
    }
  ],
  "education": [
    {
      "degree": "å­¦ä½",
      "institution": "å­¦æ ¡",
      "period": "æ—¶é—´æ®µ"
    }
  ],
  "research": ["ç ”ç©¶æ–¹å‘1", "ç ”ç©¶æ–¹å‘2"],
  "projects": [
    {
      "title": "é¡¹ç›®åç§°",
      "description": "é¡¹ç›®æè¿°",
      "role": "è§’è‰²",
      "period": "æ—¶é—´",
      "status": "çŠ¶æ€"
    }
  ],
  "publications": [
    {
      "citation": "å®Œæ•´å¼•ç”¨",
      "isFirst": true
    }
  ],
  "hobbies": [
    {
      "name": "çˆ±å¥½åç§°",
      "icon": "fas fa-icon"
    }
  ]
}</code></pre>
        </div>
    </div>

    <script src="../assets/js/member-template.js"></script>
    <script>
        let generatedHTML = '';

        function generatePage() {
            const fileInput = document.getElementById('jsonFile');
            const file = fileInput.files[0];
            
            if (!file) {
                alert('è¯·å…ˆé€‰æ‹©JSONæ–‡ä»¶ï¼');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const memberData = JSON.parse(e.target.result);
                    const template = new MemberProfileTemplate(memberData);
                    generatedHTML = template.render();
                    
                    document.getElementById('htmlOutput').textContent = generatedHTML;
                    document.getElementById('output').classList.remove('hidden');
                    
                    // æ»šåŠ¨åˆ°è¾“å‡ºåŒºåŸŸ
                    document.getElementById('output').scrollIntoView({ behavior: 'smooth' });
                } catch (error) {
                    alert('JSONæ ¼å¼é”™è¯¯ï¼š' + error.message);
                }
            };
            reader.readAsText(file);
        }

        function copyToClipboard() {
            navigator.clipboard.writeText(generatedHTML).then(() => {
                alert('âœ… ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            }).catch(err => {
                alert('å¤åˆ¶å¤±è´¥ï¼š' + err);
            });
        }
    </script>
</body>
</html>
